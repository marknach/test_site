<%- model_class = Post -%>
<div class="container">
  <div class="page-header">
    <h1><%= t '.title', :default => model_class.model_name.human.pluralize.titleize %>
    <%= link_to 'New Post', new_post_path, :class => 'btn btn-primary pull-right' %></h1>
  </div>
    <div class="media">
      <% @posts.each do |post| %>
        <% @author = User.find(post.user_id) %>
        <%= image_tag('badge.png', class: "media-object pull-left", size: "64x64") %>
        <div class="media-body">
          <h4 class="media-heading"><strong><%= link_to post.title, post_path(post) %></strong> <i>by <%= @author %></i>
          </h4>

          <p><%= post.preview %></p>
          <% if @author.id == current_user.try(:id) %>
              <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_post_path(post), :class => 'btn btn-default' %>
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          post_path(post),
                          :method => :delete,
                          :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
                          :class => 'btn btn-danger' %>
          <% end %>
        </div>
        <hr>
      <% end %>
  </div>
</div>
